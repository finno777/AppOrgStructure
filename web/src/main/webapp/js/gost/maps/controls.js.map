/* This file is generated — do not edit by hand! */
/* eslint-disable */
{"version":3,"sources":["controls.js"],"names":["require","$","fn","reduce","fnReduce","initialValue","values","previousValue","each","index","currentValue","call","byData","name","val","deactivate","target","wrapper","classMod","not","isEqualNode","contains","removeClass","on","e","toggleClass","document","parent","preventDefault","current","hasClass","text","data","slideDown","slideUp","initTiny","tinymce","init","selector","menubar","statusbar","relative_urls","image_advtab","mode","external_plugins","advlist","managementApp","cr","lists","link","visualchars","charmap","image","paste","plugins","toolbar","body_class","language_url","content_css","skin_url","advlist_bullet_styles","paste_use_dialog","paste_auto_cleanup_on_paste","paste_convert_headers_to_strong","paste_strip_class_attributes","paste_remove_spans","paste_remove_styles","paste_retain_style_properties","style_formats","title","items","block","format","setup","setUp","editor","addButton","icon","tooltip","onclick","options","appId","portalName","appName","allowedFileFormats","onClose","close","selectedFiles","RSTFileManager","getFiles","forEach","file","insertContent","uuid","open","displayName","fileName","extension","size","toFixed","ready"],"mappings":"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","file":"../controls.js","sourcesContent":["/* eslint-disable */\r\nrequire(['SHARED/jquery', 'SHARED/jqueryUI', 'SHARED/tinymce', 'SHARED/gostFileManager'], $ => {\r\n    $.fn.reduce = function(fnReduce, initialValue) {\r\n        var values = this,\r\n            previousValue = initialValue;\r\n    \r\n        values.each(function(index, currentValue) {\r\n            previousValue = fnReduce.call(currentValue, previousValue, currentValue, index, values);\r\n        });\r\n    \r\n        return previousValue;\r\n    };\r\n    \r\n    const byData = (name, val) => `[data-${name}${val ? `=\"${val}\"` : ''}]`;\r\n\r\n    const deactivate = (target, wrapper, classMod) => $(wrapper)\r\n        .not(function() {\r\n            return this.isEqualNode(target) || this.contains(target);\r\n        }).removeClass(classMod);\r\n\r\n    $('.government__toggler').on('click', function(e) {\r\n        $(this).toggleClass('government__toggler--active');\r\n    });\r\n\r\n    $(document).on('click', function(e) {\r\n        deactivate(e.target, '.government__toggler', 'government__toggler--active');\r\n        deactivate(e.target, '.dropdown.dropdown--icon', 'active');\r\n        $('.subgroup__menu').removeClass('subgroup__menu--active');\r\n    });\r\n\r\n    $(document).on('click', '.government-wrap .dropdown__button', function(e) {\r\n        $(this).parent().toggleClass('active');\r\n    });\r\n\r\n    $(document).on('click', byData('expand'), function(e) {\r\n        e.preventDefault();\r\n        const current = $(this).hasClass('expand--active');\r\n\r\n        $(this).toggleClass('expand--active', !current)\r\n        if(!current) {\r\n            $('span', this).text('Скрыть');\r\n            $($(this).data('expand')).slideDown();\r\n        } else {\r\n            $('span', this).text('Показать');\r\n            $($(this).data('expand')).slideUp();\r\n        }\r\n    });\r\n\r\n    const initTiny = () => {\r\n        tinymce.init({\r\n            selector: '.js-tiny-editor',\r\n            menubar: false,\r\n            statusbar: false,\r\n            relative_urls: false,\r\n            image_advtab: true,\r\n            mode: 'textareas',\r\n            external_plugins: {\r\n                advlist: `${managementApp.cr}/lib/tinymce/plugins/advlist/plugin.min.js`,\r\n                lists: `${managementApp.cr}/lib/tinymce/plugins/lists/plugin.min.js`,\r\n                link: `${managementApp.cr}/lib/tinymce/plugins/link/plugin.min.js`,\r\n                visualchars: `${managementApp.cr}/lib/tinymce/plugins/visualchars/plugin.min.js`,\r\n                charmap: `${managementApp.cr}/lib/tinymce/plugins/charmap/plugin.min.js`,\r\n                image: `${managementApp.cr}/lib/tinymce/plugins/image/plugin.min.js`,\r\n                paste: `${managementApp.cr}/lib/tinymce/plugins/paste/plugin.min.js`,\r\n            },\r\n            plugins: 'lists advlist link table visualchars charmap image textcolor colorpicker paste',\r\n            toolbar: 'undo redo fontsizeselect | bold italic underline strikethrough | subscript superscript forecolor backcolor | alignleft aligncenter alignright alignjustify  | ' +\r\n            'outdent indent | numlist bullist  | customlink | removeformat | photoupload videoupload fileupload',\r\n            body_class: 'mce-body',\r\n            language_url: `${managementApp.cr}/lib/tinymce/langs/ru.js`,\r\n            content_css: `/eXoResources/plugins/tinymce/skins/lightgray/content.min.css, /eXoResources/plugins/tinymce/skins/lightgray/content.RST.css`,\r\n            skin_url: '/eXoResources/plugins/tinymce/skins/lightgray',\r\n            advlist_bullet_styles: 'disc',\r\n            paste_use_dialog: false,\r\n            paste_auto_cleanup_on_paste: true,\r\n            paste_convert_headers_to_strong: false,\r\n            paste_strip_class_attributes: 'all',\r\n            paste_remove_spans: true,\r\n            paste_remove_styles: true,\r\n            paste_retain_style_properties: '',\r\n            style_formats: [\r\n                { title: 'Headers',\r\n                    items: [\r\n                        { title: 'Заголовок 1', block: 'h2' },\r\n                        { title: 'Заголовок 2', block: 'h3' },\r\n                        { title: 'Заголовок 3', block: 'h4' },\r\n                    ] },\r\n                { title: 'Blocks',\r\n                    items: [\r\n                        { title: 'Параграф', format: 'p' },\r\n                    ] },\r\n            ],\r\n            setup: function setUp(editor) {\r\n\r\n                editor.addButton('photoupload', {\r\n                    icon: 'image',\r\n                    tooltip: 'Прикрепить фото',\r\n                    onclick() {\r\n                        const options = {\r\n                            appId: managementApp.appId,\r\n                            portalName: managementApp.portalName,\r\n                            appName: managementApp.appName,\r\n                            allowedFileFormats: ['img'],\r\n                            onClose: function close() {\r\n                                const selectedFiles = RSTFileManager.getFiles();\r\n                                selectedFiles.forEach(function (file) {\r\n                                    editor.insertContent(`<img src=\"${managementApp.cr}/image-api/view.ido?uuid=${file.uuid}\" data-uuid=\"${file.uuid}\"/>`);\r\n                                });\r\n                            },\r\n                        };\r\n                        RSTFileManager.open(options);\r\n                    },\r\n                });\r\n                \r\n                editor.addButton('videoupload', {\r\n                    icon: 'media',\r\n                    tooltip: 'Прикрепить видео',\r\n                    onclick() {\r\n                        const options = {\r\n                            appId: managementApp.appId,\r\n                            portalName: managementApp.portalName,\r\n                            appName: managementApp.appName,\r\n                            allowedFileFormats: ['video'],\r\n                            onClose() {\r\n                                const selectedFiles = RSTFileManager.getFiles();\r\n                                selectedFiles.forEach(function (file) {\r\n                                    editor.insertContent(`                                            \r\n                                                    <video width=\"320\" height=\"240\" controls data-uuid=\"${file.uuid}\">\r\n                                                        <source src=\"${managementApp.cr}/media-api/view.media?uuid=${file.uuid}\" type=\"video/mp4\">\r\n                                                        <source src=\"${managementApp.cr}/media-api/view.media?uuid=${file.uuid}\" type=\"video/ogg\">\r\n                                                        Your browser does not support the video tag.\r\n                                                     </video>\r\n                                                `);\r\n                                });\r\n                            },\r\n                        };\r\n                        RSTFileManager.open(options);\r\n                    },\r\n                });\r\n\r\n                editor.addButton('fileupload', {\r\n                    icon: 'newdocument',\r\n                    tooltip: 'Прикрепить документ',\r\n                    onclick() {\r\n                        const options = {\r\n                            appId: managementApp.appId,\r\n                            portalName: managementApp.portalName,\r\n                            appName: managementApp.appName,\r\n                            allowedFileFormats: ['doc', 'archive', 'text'],\r\n                            onClose() {\r\n                                const selectedFiles = RSTFileManager.getFiles();\r\n                                selectedFiles.forEach(function (file) {\r\n                                    editor.insertContent(`\r\n                                        <a href=\"/documentManager/rest/file/load/${file.uuid}\" data-uuid=\"${file.uuid}\">${file.displayName || file.fileName}</a>\r\n                                        <span class=\"tiny-content__file-size\">(${file.extension} , ${(file.size / 10 / 1024 / 1024).toFixed(2)} Мб)</span>\r\n                                    `);\r\n                                });\r\n                            },\r\n                        };\r\n                        RSTFileManager.open(options);\r\n                    },\r\n                });\r\n            },\r\n        });\r\n    };\r\n\r\n    $(document).ready(() => {\r\n        initTiny();\r\n    })\r\n});\r\n"]}