/* This file is generated — do not edit by hand! */
/* eslint-disable */
{"version":3,"sources":["governments-view.js"],"names":["require","preloader","$","appendTo","byData","name","val","dialogMessages","division","deleteConfirmation","government","deleteCuratorConfirmation","confirmation","text","tpl","Promise","resolve","reject","dialog","autoOpen","resizable","draggable","modal","width","buttons","class","click","remove","document","on","e","preventDefault","id","data","container","parents","then","show","window","dataService","deleteDivision","catch","err","console","error","hide","removeCurator","deleteGovernment","location","managementApp","redirect"],"mappings":"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","file":"../governments-view.js","sourcesContent":["/* eslint-disable */\r\nrequire(['SHARED/jquery', 'SHARED/jqueryUI', 'SHARED/bluebird'], $ => {\r\n    const preloader = (() =>  $('<div class=\"preloader\" style=\"display: none;\"/>').appendTo('body'))();\r\n    const byData = (name, val) => `[data-${name}${val ? `=\"${val}\"` : ''}]`;\r\n    const dialogMessages = {\r\n        division: {\r\n            deleteConfirmation: 'Вы уверены, что хотите удалить отдел?'\r\n        },\r\n        government: {\r\n            deleteConfirmation: 'Вы уверены, что хотите удалить управление? Так же будут удалены все отделы, относящиеся к данному управлению.',\r\n            deleteCuratorConfirmation: 'Вы уверены, что хотите удалить куратора управления?'\r\n        }\r\n    }\r\n\r\n    const confirmation = (text) => {\r\n        const tpl = $(`<div title=\"Подтвердите действие\"><p>${text}</p></div>`);\r\n\r\n        tpl.appendTo('body');\r\n\r\n        return new Promise((resolve, reject) => {\r\n            tpl.dialog({\r\n                autoOpen: true,\r\n                resizable: false,\r\n                draggable: false,\r\n                modal: true,\r\n                width: 700,\r\n                buttons: [{\r\n                      text: \"Да\",\r\n                      class: \"button button--primary\",\r\n                      click: function() {\r\n                        $( this ).dialog('close');\r\n                        tpl.remove();\r\n                        resolve();\r\n                      }\r\n                    }, {\r\n                      text: \"Нет\",\r\n                      class: \"button\",\r\n                      click: function() {\r\n                        $( this ).dialog('close');\r\n                        tpl.remove();\r\n                        reject();\r\n                      }\r\n                }]\r\n            });\r\n        });\r\n    };\r\n\r\n    \r\n    $(document).on('click', byData('delete-division'), function(e) {\r\n        e.preventDefault();\r\n        const id = +$(this).data('delete-division');\r\n        const container = $(this).parents(byData('remove-container'));\r\n\r\n        confirmation(dialogMessages.division.deleteConfirmation)\r\n            .then(() => {\r\n                preloader.show();\r\n                return window.dataService.deleteDivision(id);\r\n            })\r\n            .then(() => {\r\n                container.remove();\r\n            })\r\n            .catch((err) => console.error(err))\r\n            .then(preloader.hide);\r\n    });\r\n    \r\n    $(document).on('click', byData('delete-curator'), function(e) {\r\n        e.preventDefault();\r\n        const id = +$(this).data('delete-curator');\r\n        const container = $(this).parents(byData('remove-container'));\r\n\r\n        confirmation(dialogMessages.government.deleteCuratorConfirmation)\r\n            .then(() => {\r\n                preloader.show();\r\n                return window.dataService.removeCurator(id);\r\n            })\r\n            .then(() => {\r\n                container.remove();\r\n            })\r\n            .catch((err) => console.error(err))\r\n            .then(preloader.hide);\r\n    });\r\n    \r\n    $(document).on('click', byData('delete-government'), function(e) {\r\n        e.preventDefault();\r\n        const id = +$(this).data('delete-government');\r\n\r\n        confirmation(dialogMessages.government.deleteConfirmation)\r\n            .then(() => {\r\n                preloader.show();\r\n                return window.dataService.deleteGovernment(id);\r\n            })\r\n            .then(() => {\r\n                location = managementApp.redirect;\r\n            })\r\n            .catch((err) => console.error(err))\r\n            .then(preloader.hide);\r\n    });\r\n    \r\n});\r\n"]}