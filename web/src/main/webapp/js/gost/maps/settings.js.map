/* This file is generated â€” do not edit by hand! */
/* eslint-disable */
{"version":3,"sources":["settings.js"],"names":["require","$","cr","orgStruct","usersData","organsData","$form","initializeDropdowns","document","on","currentVisibility","parent","hasClass","removeClass","$dropdown","addClass","$dropdownMenu","siblings","buttonOffset","getBoundingClientRect","css","top","window","width","right","e","is","target","has","length","each","Settings","checkRow","find","not","push","data","changePosition","parents","$parent","position","id","rowHtml","html","positionNeighbor","next","attr","after","remove","prev","before","save","that","savedUsers","savedOrgans","ajax","headers","adminsHeaders","url","dataType","type","JSON","stringify","success","console","log","error","err","statusCode","location","href","redirectUrl","removeAction","param","processData","contentType","init","ready"],"mappings":"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","file":"../settings.js","sourcesContent":["/* global orgStruct, gostAirNavigation, $ */\nrequire(['SHARED/jquery'], function ($) {\n    const cr = orgStruct.cr;\n    const usersData = [];\n    const organsData = [];\n    const $form = $('#org-setting');\n\n    function initializeDropdowns() {\n        $(document).on('click', '.org-page .dropdown__button', function () {\n            var currentVisibility = $(this).parent('.dropdown').hasClass('active');\n            $('.dropdown').removeClass('active');\n\n            if (!currentVisibility) {\n                var $dropdown = $(this).parent('.dropdown');\n                $dropdown.addClass('active');\n\n                if ($dropdown.hasClass('dropdown--fixed')) {\n                    var $dropdownMenu = $(this).siblings('.dropdown__menu');\n                    var buttonOffset = this.getBoundingClientRect();\n                    $dropdownMenu.css('top', buttonOffset.top + 'px');\n                    $dropdownMenu.css('right', $(window).width() - buttonOffset.right + 'px');\n                }\n            }\n        });\n\n        $(document).on('mouseup', function (e) {\n            var $dropdown = $('.org-page .dropdown');\n            if (!$dropdown.is(e.target) && $dropdown.has(e.target).length === 0) {\n                $dropdown.removeClass('active');\n            }\n        });\n\n        $(window).on('scroll resize orientationchange', function () {\n            var $dropdown = $('.org-page .dropdown--fixed');\n\n            $dropdown.each(function () {\n                $(this).removeClass('active');\n            });\n        });\n    }\n\n    const Settings = {\n        checkRow: function () {\n            $form.find('.list__row').not('.list__row--static').each(function () {\n                if ($(this).is('[data-organ]')) {\n                    organsData.push({\n                        'id': $(this).data('id'),\n                        'sitePosition': $(this).data('position')\n                    });\n                } else {\n                    usersData.push({\n                        'id': $(this).data('id'),\n                        'sitePosition': $(this).data('position')\n                    });\n                }\n            });\n        },\n\n        changePosition: function () {\n            $('body').on('click', '.js-move-up, .js-move-down', function () {\n                $(this).parents('.dropdown').removeClass('active');\n\n                let $parent = $(this).parents('.list__row');\n                let position = $parent.data('position');\n                let id = $parent.data('id');\n                let rowHtml = $parent.html();\n\n                if ($(this).hasClass('js-move-down')) {\n                    let positionNeighbor = $parent.next().data('position');\n                    $parent.next().data('position', position).attr('data-position', position);\n                    $parent.next().after(`<div class=\"list__row\" ${$parent.is('[data-organ]') ? 'data-oragn' : ''} data-position=\"${positionNeighbor}\" data-id=\"${id}\">${rowHtml}</div>`);\n                    $parent.remove();\n                } else {\n                    let positionNeighbor = $parent.prev().data('position');\n                    $parent.prev().data('position', position).attr('data-position', position);\n                    $parent.prev().before(`<div class=\"list__row\" ${$parent.is('[data-organ]') ? 'data-oragn' : ''} data-position=\"${positionNeighbor}\" data-id=\"${id}\">${rowHtml}</div>`);\n                    $parent.remove();\n                }\n            });\n        },\n\n        save: function () {\n            let that = this;\n            let savedUsers = false;\n            let savedOrgans = false;\n\n            $('.js-settings-save').on('click', function () {\n                that.checkRow();\n\n                $.ajax({\n                    headers: orgStruct.adminsHeaders,\n                    url: `${cr}/rest-api/orgStructure/savePeople.action`,\n                    dataType: 'json',\n                    type: \"POST\",\n                    data: JSON.stringify(usersData),\n                    success: function (data) {\n                        console.log(data);\n                    },\n                    error: function (err) {\n                        console.log(err);\n                    },\n                    statusCode: {\n                        200: function () {\n                            savedUsers = true;\n\n                            if (savedUsers && savedOrgans) {\n                                window.location.href = orgStruct.redirectUrl\n                            }\n                        }\n                    }\n                });\n\n                $.ajax({\n                    headers: orgStruct.adminsHeaders,\n                    url: `${cr}/rest-api/orgStructure/saveOrgans.action`,\n                    dataType: 'json',\n                    type: \"POST\",\n                    data: JSON.stringify(organsData),\n                    success: function (data) {\n                        console.log(data);\n                    },\n                    error: function (err) {\n                        console.log(err);\n                    },\n                    statusCode: {\n                        200: function () {\n                            savedOrgans = true;\n\n                            if (savedUsers && savedOrgans) {\n                                window.location.href = orgStruct.redirectUrl\n                            }\n                        }\n                    }\n                });\n            });\n        },\n\n        removeAction: function () {\n            $('.js-remove-action').on('click', function () {\n                let that = $(this);\n\n                $.ajax({\n                    headers: {\n                        \"Accept\": '*/*',\n                        \"gtn.access.appid\": orgStruct.adminsHeaders['gtn.access.appid']\n                    },\n                    url: that.data('url') + '?' + $.param({\"id\": that.data('id')}),\n                    type: 'DELETE',\n                    processData: false,\n                    contentType: false,\n                    statusCode: {\n                        200: function () {\n                            that.parents('.list__row').remove();\n                        }\n                    }\n                });\n            });\n        },\n\n        init: function () {\n            this.save();\n            this.changePosition();\n            this.removeAction();\n        }\n    };\n\n    $(document).ready(function () {\n        initializeDropdowns($);\n        Settings.init();\n    });\n});"]}