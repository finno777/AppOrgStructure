/* This file is generated — do not edit by hand! */
/* eslint-disable */
{"version":3,"sources":["singleDivision.js"],"names":["require","byData","name","val","preloader","$","appendTo","dialogMessages","deletePerson","confirmation","text","tpl","Promise","resolve","reject","dialog","autoOpen","resizable","draggable","modal","width","buttons","class","click","remove","document","on","e","preventDefault","id","data","container","parents","then","show","window","dataService","removeDivisionPerson","catch","console","error","hide"],"mappings":";;AAAA;AACAA,QAAQ,CAAC,eAAD,EAAkB,iBAAlB,CAAR,EAA8C,aAAK;AAC/C,QAAMC,SAAS,SAATA,MAAS,CAACC,IAAD,EAAOC,GAAP;AAAA,0BAAwBD,IAAxB,IAA+BC,aAAWA,GAAX,SAAoB,EAAnD;AAAA,KAAf;AACA,QAAMC,YAAa;AAAA,eAAOC,EAAE,iDAAF,EAAqDC,QAArD,CAA8D,MAA9D,CAAP;AAAA,KAAD,EAAlB;;AAEA,QAAMC,iBAAiB;AACnBC,sBAAc;AADK,KAAvB;;AAIA,QAAMC,eAAe,SAAfA,YAAe,CAACC,IAAD,EAAU;AAC3B,YAAMC,MAAMN,2IAA0CK,IAA1C,gBAAZ;;AAEAC,YAAIL,QAAJ,CAAa,MAAb;;AAEA,eAAO,IAAIM,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCH,gBAAII,MAAJ,CAAW;AACPC,0BAAU,IADH;AAEPC,2BAAW,KAFJ;AAGPC,2BAAW,KAHJ;AAIPC,uBAAO,IAJA;AAKPC,uBAAO,GALA;AAMPC,yBAAS,CAAC;AACJX,0BAAM,IADF;AAEJY,2BAAO,wBAFH;AAGJC,2BAAO,iBAAW;AAChBlB,0BAAG,IAAH,EAAUU,MAAV,CAAiB,OAAjB;AACAJ,4BAAIa,MAAJ;AACAX,gCAAQ,IAAR;AACD;AAPG,iBAAD,EAQF;AACDH,0BAAM,KADL;AAEDY,2BAAO,QAFN;AAGDC,2BAAO,iBAAW;AAChBlB,0BAAG,IAAH,EAAUU,MAAV,CAAiB,OAAjB;AACAJ,4BAAIa,MAAJ;AACAV,+BAAO,KAAP;AACD;AAPA,iBARE;AANF,aAAX;AAwBH,SAzBM,CAAP;AA0BH,KA/BD;;AAiCAT,MAAEoB,QAAF,EAAYC,EAAZ,CAAe,OAAf,EAAwBzB,OAAO,eAAP,CAAxB,EAAiD,UAAS0B,CAAT,EAAY;AACzDA,UAAEC,cAAF;AACA,YAAMC,KAAK,CAACxB,EAAE,IAAF,EAAQyB,IAAR,CAAa,eAAb,CAAZ;AACA,YAAMC,YAAY1B,EAAE,IAAF,EAAQ2B,OAAR,CAAgB/B,OAAO,kBAAP,CAAhB,CAAlB;;AAEAQ,qBAAaF,eAAeC,YAA5B,EACKyB,IADL,CACU,YAAM;AACR7B,sBAAU8B,IAAV;AACA,mBAAOC,OAAOC,WAAP,CAAmBC,oBAAnB,CAAwCR,EAAxC,CAAP;AACH,SAJL,EAKKI,IALL,CAKU;AAAA,mBAAMF,UAAUP,MAAV,EAAN;AAAA,SALV,EAMKc,KANL,CAMWC,QAAQC,KANnB,EAOKP,IAPL,CAOU;AAAA,mBAAM7B,UAAUqC,IAAV,EAAN;AAAA,SAPV;AAQH,KAbD;AAcH,CAvDD","file":"../singleDivision.js","sourcesContent":["/* eslint-disable */\r\nrequire(['SHARED/jquery', 'SHARED/jqueryUI'], $ => {\r\n    const byData = (name, val) => `[data-${name}${val ? `=\"${val}\"` : ''}]`;\r\n    const preloader = (() =>  $('<div class=\"preloader\" style=\"display: none;\"/>').appendTo('body'))();\r\n\r\n    const dialogMessages = {\r\n        deletePerson: 'Вы уверены, что хотите удалить участника отдела?'\r\n    }\r\n\r\n    const confirmation = (text) => {\r\n        const tpl = $(`<div title=\"Подтвердите действие\"><p>${text}</p></div>`);\r\n\r\n        tpl.appendTo('body');\r\n\r\n        return new Promise((resolve, reject) => {\r\n            tpl.dialog({\r\n                autoOpen: true,\r\n                resizable: false,\r\n                draggable: false,\r\n                modal: true,\r\n                width: 700,\r\n                buttons: [{\r\n                      text: \"Да\",\r\n                      class: \"button button--primary\",\r\n                      click: function() {\r\n                        $( this ).dialog('close');\r\n                        tpl.remove();\r\n                        resolve(true);\r\n                      }\r\n                    }, {\r\n                      text: \"Нет\",\r\n                      class: \"button\",\r\n                      click: function() {\r\n                        $( this ).dialog('close');\r\n                        tpl.remove();\r\n                        reject(false);\r\n                      }\r\n                }]\r\n            });\r\n        });\r\n    };\r\n\r\n    $(document).on('click', byData('remove-person'), function(e) {\r\n        e.preventDefault();\r\n        const id = +$(this).data('remove-person');\r\n        const container = $(this).parents(byData('remove-container'));\r\n\r\n        confirmation(dialogMessages.deletePerson)\r\n            .then(() => {\r\n                preloader.show();\r\n                return window.dataService.removeDivisionPerson(id);\r\n            })\r\n            .then(() => container.remove())\r\n            .catch(console.error)\r\n            .then(() => preloader.hide());\r\n    });\r\n});\r\n"]}