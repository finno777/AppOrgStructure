/* This file is generated — do not edit by hand! */
/* eslint-disable */
{"version":3,"sources":["subdivision.js"],"names":["require","byData","name","val","preloader","$","appendTo","dialogMessages","TypeOrganization","deleteConfirmation","Organization","GroupOrganizations","confirmation","text","tpl","Promise","resolve","reject","dialog","autoOpen","resizable","draggable","modal","width","buttons","class","click","remove","document","on","e","preventDefault","id","data","type","container","parents","then","show","window","dataService","catch","err","console","error","hide"],"mappings":";;AAAA;AACAA,QAAQ,CAAC,eAAD,EAAkB,iBAAlB,EAAqC,iBAArC,CAAR,EAAiE,aAAK;AAClE,QAAMC,SAAS,SAATA,MAAS,CAACC,IAAD,EAAOC,GAAP;AAAA,0BAAwBD,IAAxB,IAA+BC,aAAWA,GAAX,SAAoB,EAAnD;AAAA,KAAf;AACA,QAAMC,YAAa;AAAA,eAAOC,EAAE,iDAAF,EAAqDC,QAArD,CAA8D,MAA9D,CAAP;AAAA,KAAD,EAAlB;;AAEA,QAAMC,iBAAiB;AACnBC,0BAAkB;AACdC,gCAAoB;AADN,SADC;AAInBC,sBAAc;AACVD,gCAAoB;AADV,SAJK;AAOnBE,4BAAoB;AAChBF,gCAAoB;AADJ;AAPD,KAAvB;;AAYA,QAAMG,eAAe,SAAfA,YAAe,CAACC,IAAD,EAAU;AAC3B,YAAMC,MAAMT,2IAA0CQ,IAA1C,gBAAZ;;AAEAC,YAAIR,QAAJ,CAAa,MAAb;;AAEA,eAAO,IAAIS,OAAJ,CAAY,UAACC,OAAD,EAAUC,MAAV,EAAqB;AACpCH,gBAAII,MAAJ,CAAW;AACPC,0BAAU,IADH;AAEPC,2BAAW,KAFJ;AAGPC,2BAAW,KAHJ;AAIPC,uBAAO,IAJA;AAKPC,uBAAO,GALA;AAMPC,yBAAS,CAAC;AACJX,0BAAM,IADF;AAEJY,2BAAO,wBAFH;AAGJC,2BAAO,iBAAW;AAChBrB,0BAAG,IAAH,EAAUa,MAAV,CAAiB,OAAjB;AACAJ,4BAAIa,MAAJ;AACAX;AACD;AAPG,iBAAD,EAQF;AACDH,0BAAM,KADL;AAEDY,2BAAO,QAFN;AAGDC,2BAAO,iBAAW;AAChBrB,0BAAG,IAAH,EAAUa,MAAV,CAAiB,OAAjB;AACAJ,4BAAIa,MAAJ;AACAV;AACD;AAPA,iBARE;AANF,aAAX;AAwBH,SAzBM,CAAP;AA0BH,KA/BD;;AAiCAZ,MAAEuB,QAAF,EAAYC,EAAZ,CAAe,OAAf,EAAwB5B,OAAO,QAAP,CAAxB,EAA0C,UAAS6B,CAAT,EAAY;AAClDA,UAAEC,cAAF;AACA,YAAMC,KAAK3B,EAAE,IAAF,EAAQ4B,IAAR,CAAa,QAAb,CAAX;AACA,YAAMC,OAAO7B,EAAE,IAAF,EAAQ4B,IAAR,CAAa,MAAb,CAAb;AACA,YAAME,YAAY9B,EAAE,IAAF,EAAQ+B,OAAR,CAAgBnC,OAAO,kBAAP,CAAhB,CAAlB;;AAEAW,qBAAaL,eAAe2B,IAAf,EAAqBzB,kBAAlC,EACK4B,IADL,CACU,YAAM;AACRjC,sBAAUkC,IAAV;AACA,mBAAOC,OAAOC,WAAP,YAA4BN,IAA5B,EAAoCF,EAApC,CAAP;AACH,SAJL,EAKKK,IALL,CAKU,YAAM;AACRF,sBAAUR,MAAV;AACH,SAPL,EAQKc,KARL,CAQW,UAACC,GAAD;AAAA,mBAASC,QAAQC,KAAR,CAAcF,GAAd,CAAT;AAAA,SARX,EASKL,IATL,CASUjC,UAAUyC,IATpB;AAUH,KAhBD;AAiBH,CAlED","file":"../subdivision.js","sourcesContent":["/* eslint-disable */\r\nrequire(['SHARED/jquery', 'SHARED/jqueryUI', 'SHARED/bluebird'], $ => {\r\n    const byData = (name, val) => `[data-${name}${val ? `=\"${val}\"` : ''}]`;\r\n    const preloader = (() =>  $('<div class=\"preloader\" style=\"display: none;\"/>').appendTo('body'))();\r\n\r\n    const dialogMessages = {\r\n        TypeOrganization: {\r\n            deleteConfirmation: 'Вы уверены, что хотите удалить тип организации? Вместе с типом организации будут удалены входящие в неё организации и группы организаций.'\r\n        },\r\n        Organization: {\r\n            deleteConfirmation: 'Вы уверены, что хотите удалить организацию?'\r\n        },\r\n        GroupOrganizations: {\r\n            deleteConfirmation: 'Вы уверены, что хотите удалить группу организаций?'\r\n        }\r\n    }\r\n\r\n    const confirmation = (text) => {\r\n        const tpl = $(`<div title=\"Подтвердите действие\"><p>${text}</p></div>`);\r\n\r\n        tpl.appendTo('body');\r\n\r\n        return new Promise((resolve, reject) => {\r\n            tpl.dialog({\r\n                autoOpen: true,\r\n                resizable: false,\r\n                draggable: false,\r\n                modal: true,\r\n                width: 700,\r\n                buttons: [{\r\n                      text: \"Да\",\r\n                      class: \"button button--primary\",\r\n                      click: function() {\r\n                        $( this ).dialog('close');\r\n                        tpl.remove();\r\n                        resolve();\r\n                      }\r\n                    }, {\r\n                      text: \"Нет\",\r\n                      class: \"button\",\r\n                      click: function() {\r\n                        $( this ).dialog('close');\r\n                        tpl.remove();\r\n                        reject();\r\n                      }\r\n                }]\r\n            });\r\n        });\r\n    };\r\n\r\n    $(document).on('click', byData('remove'), function(e) {\r\n        e.preventDefault();\r\n        const id = $(this).data('remove');\r\n        const type = $(this).data('type');\r\n        const container = $(this).parents(byData('remove-container'));\r\n\r\n        confirmation(dialogMessages[type].deleteConfirmation)\r\n            .then(() => {\r\n                preloader.show();\r\n                return window.dataService[`delete${type}`](id);\r\n            })\r\n            .then(() => {\r\n                container.remove();\r\n            })\r\n            .catch((err) => console.error(err))\r\n            .then(preloader.hide);\r\n    });\r\n});\r\n"]}